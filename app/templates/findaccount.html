{% include 'template.html' %}
<script>
function myFunction1() {

    $.ajax({
      url : window.location.origin + '/selectcustomer/' + $('#id').html(), 
      type : 'GET',
      success: function(msg) {                   
                        $(results).fadeOut(800);
                        $('#test').load(document.URL + ' #test')
                        $('#test').fadeIn(800);
        }
    })
};
</script>

<div class="outer_ticket_search">
  <div id="results">
    <br>
    <h2 style="font-weight: bold; text-align: center;">Is this the correct customer?</h2>
    <br>
<table class="table table-striped table-bordered table-hover">
  <thead class="thead-dark">
    <tr>
      <th scope="col">ID</th>
      <th scope="col" id="name">Name</th>
      <th scope="col" id="phonenumber">Phone Number</th>
      <th scope="col" id="email_chart">Email Address</th>
      <th scope="col">Select</th>
    </tr>
  </thead>
  <tbody>
<!-- handles if searching by 2 fields and preventing duplicates from showing up -->
{% if cxbyfname and cxbylname %}
    {% for x in cxbyfname %}
    <tr>
      <th scope="row" id="id">{{x.cx_id}}</th>
      <td id="name">{{x.customer_fname}}</td>
      <td id="phonenumber">{{x.phone_num}}</td>
      <td id="email_chart">{{x.email}}</td>
        <!-- handle this with an ajax call like before -->
      <td><input class="btn btn-secondary btn-sm btn-block" id="submit_button" type="submit" onclick="myFunction1()" name="{{loop.index}}Select"  value="Select"></td>
    </tr>
    {% endfor %}

{% elif cxbyfname %}
  	{% for x in cxbyfname %}
    <tr>
      <th scope="row" id="id">{{x.cx_id}}</th>
      <td id="name">{{x.customer_fname}}</td>
      <td id="phonenumber">{{x.phone_num}}</td>
      <td id="email_chart">{{x.email}}</td>
        <!-- handle this with an ajax call like before -->
      <td><input class="btn btn-secondary btn-sm btn-block" id="submit_button" type="submit" onclick="myFunction1()" name="{{loop.index}}Select"  value="Select"></td>
    </tr>
    {% endfor %}

{% elif cxbylname %}
    {% for x in cxbylname %}
    <tr>
      <th scope="row" id="id">{{x.cx_id}}</th>
      <td id="name">{{x.customer_fname}}</td>
      <td id="phonenumber">{{x.phone_num}}</td>
      <td id="email_chart">{{x.email}}</td>
        <!-- handle this with an ajax call like before -->
      <td><input class="btn btn-secondary btn-sm btn-block" id="submit_button" type="submit" onclick="myFunction1()" name="{{loop.index}}Select"  value="Select"></td>
    </tr>
    {% endfor %}
    
{% elif cxbyid %}
    {% for x in cxbyid %}
    <tr>
      <th scope="row" id="id">{{x.cx_id}}</th>
      <td id="name">{{x.customer_fname}}</td>
      <td id="phonenumber">{{x.phone_num}}</td>
      <td id="email">{{x.email}}</td>
        <!-- handle this with an ajax call like before -->
      <td><input class="btn btn-secondary btn-sm btn-block" id="submit_button" type="submit" onclick="myFunction1()" name="{{loop.index}}Select"  value="Select"></td>
    </tr>
    {% endfor %}

{% elif cxbyphonenum %}
    {% for x in cxbyphonenum %}
    <tr>
      <th scope="row" id="id">{{x.cx_id}}</th>
      <td id="name">{{x.customer_fname}}</td>
      <td id="phonenumber">{{x.phone_num}}</td>
      <td id="email">{{x.email}}</td>
        <!-- handle this with an ajax call like before -->
      <td><input class="btn btn-secondary btn-sm btn-block" id="submit_button" type="submit" onclick="myFunction1()" name="{{loop.index}}Select"  value="Select"></td>
    </tr>
    {% endfor %}
    {% endif %}
  </tbody>
</table>
</div>
</div>
</html>